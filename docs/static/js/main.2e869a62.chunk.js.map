{"version":3,"sources":["components/BookSearchForm.js","lib/tweet.js","components/BookItem.js","components/CandidateBook.js","components/BookSelector.js","components/SelectedBook.js","components/TweetButton.js","components/TweetTextCopyButton.js","App.js","index.js"],"names":["BookSearchForm","props","state","value","handleChange","bind","handleSubmit","event","this","setState","target","preventDefault","length","onCandidateBooksUpdate","fetch","encodeURIComponent","then","response","json","data","Form","className","onSubmit","InputGroup","FormControl","placeholder","onChange","Append","Button","variant","type","React","Component","getTweetText","book","title","author","publisherName","parseSalesDate","salesDate","slice","filter","v","join","itemUrl","m","match","parseInt","BookItem","src","mediumImageUrl","alt","isbn","CandidateBook","handleClick","onClick","BookSelector","candidateBooks","books","Items","map","item","i","ListGroup","Item","onSelect","SelectedBook","TweetButton","text","url","Row","Col","href","block","TweetTextCopyButton","tooltipShown","handleTooltipToggle","navigator","clipboard","writeText","show","setTimeout","OverlayTrigger","placement","trigger","onToggle","overlay","Tooltip","App","selectedBook","handleCandidateBooksUpdate","handleBookSelect","Container","xs","md","lg","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2e869a62.chunk.js","sourcesContent":["import React from 'react';\nimport { Form, InputGroup, FormControl, Button } from 'react-bootstrap';\nimport { Search } from 'react-bootstrap-icons';\nimport './BookSearchForm.css';\n\nexport default class BookSearchForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {value: ''}\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value})\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n\n    if (this.state.value.length <= 0) {\n      this.props.onCandidateBooksUpdate(null)\n      return\n    }\n\n    fetch('https://app.rakuten.co.jp/services/api/BooksBook/Search/20170404?applicationId=1035158805071077100&title=' +\n          encodeURIComponent(this.state.value))\n      .then(response => response.json())\n      .then(data => this.props.onCandidateBooksUpdate(data))\n  }\n\n  render() {\n    return (\n      <Form className=\"book-search-form\" onSubmit={this.handleSubmit}>\n        <InputGroup className=\"mb-3\">\n          <FormControl placeholder=\"本を検索してツイートします\"\n                       value={this.state.value}\n                       onChange={this.handleChange} />\n          <InputGroup.Append>\n            <Button variant=\"primary\" type=\"submit\"><Search /></Button>\n          </InputGroup.Append>\n        </InputGroup>\n      </Form>\n    )\n  }\n}\n","const HASH_TAG = 'よむよむ会'\nconst SERVICE_URL = 'https://yomuyomukai.tsujio.org'\n\nexport function getTweetText(book) {\n  return `\"${book.title || ''}\",` +\n         ` ${(book.author || '')},` +\n         ` ${book.publisherName || ''},` +\n         ` ${parseSalesDate(book.salesDate).slice(0, 2).filter(v => v).join('/') || ''}` +\n         ` ${book.itemUrl || ''}` +\n         `\\n#${HASH_TAG} ${SERVICE_URL}`\n}\n\nexport function parseSalesDate(salesDate) {\n  let m = salesDate.match(/\\s*(\\d+)\\D+(\\d+)\\D+(\\d+)/)\n  if (m) {\n    return [parseInt(m[1]), parseInt(m[2]), parseInt(m[3])]\n  }\n  m = salesDate.match(/\\s*(\\d+)\\D+(\\d+)/)\n  if (m) {\n    return [parseInt(m[1]), parseInt(m[2]), null]\n  }\n  m = salesDate.match(/\\s*(\\d+)/)\n  if (m) {\n    return [parseInt(m[1]), null, null]\n  }\n  return [null, null, null]\n}\n","import React from 'react';\nimport { parseSalesDate } from '../lib/tweet';\nimport './BookItem.css';\n\nexport default class BookItem extends React.Component {\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    const book = this.props.book\n    return (\n      <div className=\"book\">\n        <div className=\"book-img-container\">\n          <img src={book.mediumImageUrl} alt={book.title} />\n        </div>\n        <div>\n          <span className=\"book-title\">{book.title}</span>\n          <span className=\"book-authors\">{book.author}</span>\n          <span className=\"book-publisher\">{book.publisherName}</span>\n          <span className=\"book-published-date\">{parseSalesDate(book.salesDate).slice(0, 2).filter(v => v).join('/')}</span>\n          <span className=\"book-isbn\">{book.isbn}</span>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport BookItem from './BookItem';\nimport './CandidateBook.css';\n\nexport default class CandidateBook extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleClick = this.handleClick.bind(this)\n  }\n\n  handleClick(event) {\n    this.props.onClick(this.props.book)\n  }\n\n  render() {\n    return (\n      <div className=\"candidate-book\" onClick={this.handleClick}>\n        <BookItem book={this.props.book} />\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ListGroup } from 'react-bootstrap';\nimport CandidateBook from './CandidateBook';\nimport './BookSelector.css';\n\nexport default class BookSelector extends React.Component {\n  render() {\n    if (this.props.candidateBooks.length <= 0) {\n      return null\n    }\n    const books = this.props.candidateBooks.Items.map((item, i) => {\n      return (\n        <ListGroup.Item className=\"candidate-books-item\">\n          <CandidateBook book={item.Item}\n                         onClick={this.props.onSelect} />\n        </ListGroup.Item>\n      )\n    })\n    return (\n      <ListGroup>\n        {books}\n      </ListGroup>\n    )\n  }\n}\n","import React from 'react';\nimport BookItem from './BookItem';\nimport './SelectedBook.css';\n\nexport default class SelectedBook extends React.Component {\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    return (\n      <div className=\"selected-book\">\n        <BookItem book={this.props.book} />\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { Row, Col, Button } from 'react-bootstrap';\nimport { getTweetText } from '../lib/tweet';\nimport './TweetButton.css';\n\nexport default class TweetButton extends React.Component {\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    const text = getTweetText(this.props.book)\n    const url = `http://twitter.com/share?url=${encodeURIComponent(text)}`\n\n    return (\n      <Row>\n        <Col>\n          <Button className=\"tweet-button\"\n                  variant=\"primary\"\n                  href={url}\n                  block\n                  target=\"_blank\">この本をツイートする</Button>\n        </Col>\n      </Row>\n    )\n  }\n}\n","import React from 'react';\nimport { Row, Col, Button, OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport { CardText } from 'react-bootstrap-icons';\nimport { getTweetText } from '../lib/tweet';\nimport './TweetTextCopyButton.css';\n\nexport default class TweetTextCopyButton extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      tooltipShown: false\n    }\n    this.handleClick = this.handleClick.bind(this)\n    this.handleTooltipToggle = this.handleTooltipToggle.bind(this)\n  }\n\n  handleClick(event) {\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(getTweetText(this.props.book))\n    }\n  }\n\n  handleTooltipToggle(show) {\n    this.setState({tooltipShown: show})\n    setTimeout(() => {\n      this.setState({tooltipShown: false})\n    }, 1000)\n  }\n\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    return (\n      <Row>\n        <Col>\n          <OverlayTrigger placement=\"bottom\"\n                          trigger=\"click\"\n                          show={this.state.tooltipShown}\n                          onToggle={this.handleTooltipToggle}\n                          overlay={(props) => (\n                            <Tooltip {...props}>Copied</Tooltip>\n                          )}>\n            <Button className=\"tweet-text-copy-button\"\n                    variant=\"light\"\n                    onClick={this.handleClick}><CardText /></Button>\n          </OverlayTrigger>\n        </Col>\n      </Row>\n    )\n  }\n}\n","import React from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport BookSearchForm from './components/BookSearchForm';\nimport BookSelector from './components/BookSelector';\nimport SelectedBook from './components/SelectedBook';\nimport TweetButton from './components/TweetButton';\nimport TweetTextCopyButton from './components/TweetTextCopyButton';\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      candidateBooks: [],\n      selectedBook: null,\n    }\n    this.handleCandidateBooksUpdate = this.handleCandidateBooksUpdate.bind(this)\n    this.handleBookSelect = this.handleBookSelect.bind(this)\n  }\n\n  handleCandidateBooksUpdate(candidateBooks) {\n    if (!candidateBooks) {\n      this.setState({\n        candidateBooks: [],\n        selectedBook: null,\n      })\n    } else {\n      this.setState({\n        candidateBooks: candidateBooks,\n        selectedBook: null,\n      })\n    }\n  }\n\n  handleBookSelect(book) {\n    this.setState({\n      candidateBooks: [],\n      selectedBook: book,\n    })\n  }\n\n  render() {\n    return (\n      <Container>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <div className=\"header\">\n              <h1>本をよむよむ会</h1>\n            </div>\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <BookSearchForm onCandidateBooksUpdate={this.handleCandidateBooksUpdate} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <BookSelector candidateBooks={this.state.candidateBooks}\n                          onSelect={this.handleBookSelect} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <SelectedBook book={this.state.selectedBook} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={10} md={8} lg={6}>\n            <TweetButton book={this.state.selectedBook} />\n          </Col>\n          <Col xs={2} md={1} lg={1}>\n            <TweetTextCopyButton book={this.state.selectedBook} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <div className=\"footer\">\n              <span>&copy; <a href=\"https://www.tsujio.org\">辻尾研</a></span>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    )\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}