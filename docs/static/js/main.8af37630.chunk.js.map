{"version":3,"sources":["components/BookSearchForm.js","components/BookItem.js","components/CandidateBook.js","components/BookSelector.js","components/SelectedBook.js","lib/tweet.js","components/TweetButton.js","components/TweetTextCopyButton.js","App.js","index.js"],"names":["BookSearchForm","props","state","value","handleChange","bind","handleSubmit","event","this","setState","target","preventDefault","length","onCandidateBooksUpdate","fetch","encodeURIComponent","then","response","json","data","Form","className","onSubmit","InputGroup","FormControl","placeholder","onChange","Append","Button","variant","type","React","Component","BookItem","book","volumeInfo","industryIdentifiers","filter","v","match","reduce","v1","v2","identifier","src","imageLinks","smallThumbnail","title","authors","join","publisher","publishedDate","extractISBN","CandidateBook","handleClick","onClick","BookSelector","candidateBooks","books","items","map","i","ListGroup","Item","onSelect","SelectedBook","getTweetText","canonicalVolumeLink","TweetButton","text","url","Row","Col","href","block","TweetTextCopyButton","navigator","clipboard","writeText","App","selectedBook","handleCandidateBooksUpdate","handleBookSelect","Container","xs","md","lg","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8af37630.chunk.js","sourcesContent":["import React from 'react';\nimport { Form, InputGroup, FormControl, Button } from 'react-bootstrap';\nimport { Search } from 'react-bootstrap-icons';\nimport './BookSearchForm.css';\n\nexport default class BookSearchForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {value: ''}\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value})\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n\n    if (this.state.value.length <= 0) {\n      this.props.onCandidateBooksUpdate(null)\n      return\n    }\n\n    fetch('https://www.googleapis.com/books/v1/volumes?q=' +\n          encodeURIComponent(this.state.value))\n      .then(response => response.json())\n      .then(data => this.props.onCandidateBooksUpdate(data))\n  }\n\n  render() {\n    return (\n      <Form className=\"book-search-form\" onSubmit={this.handleSubmit}>\n        <InputGroup className=\"mb-3\">\n          <FormControl placeholder=\"本を検索してツイートします\"\n                       value={this.state.value}\n                       onChange={this.handleChange} />\n          <InputGroup.Append>\n            <Button variant=\"primary\" type=\"submit\"><Search /></Button>\n          </InputGroup.Append>\n        </InputGroup>\n      </Form>\n    )\n  }\n}\n","import React from 'react';\nimport './BookItem.css';\n\nexport default class BookItem extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  extractISBN(book) {\n    if (!book.volumeInfo.industryIdentifiers) {\n      return \"\"\n    }\n    return book.volumeInfo.industryIdentifiers\n      .filter(v => v.type.match(/isbn/i))\n      .reduce((v1, v2) => (v1.identifier.length > v2.identifier.length ? v1 : v2),\n              {identifier: \"\"})\n      .identifier\n  }\n\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    const book = this.props.book\n    return (\n      <div className=\"book\">\n        <div className=\"book-img-container\">\n          <img src={(book.volumeInfo.imageLinks || {}).smallThumbnail} />\n        </div>\n        <div>\n          <span className=\"book-title\">{book.volumeInfo.title}</span>\n          <span className=\"book-authors\">{(book.volumeInfo.authors || []).join(', ')}</span>\n          <span className=\"book-publisher\">{book.volumeInfo.publisher}</span>\n          <span className=\"book-published-date\">{book.volumeInfo.publishedDate}</span>\n          <span className=\"book-isbn\">{this.extractISBN(book)}</span>\n\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport BookItem from './BookItem';\nimport './CandidateBook.css';\n\nexport default class CandidateBook extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleClick = this.handleClick.bind(this)\n  }\n\n  handleClick(event) {\n    this.props.onClick(this.props.book)\n  }\n\n  render() {\n    const book = this.props.book\n    return (\n      <div className=\"candidate-book\" onClick={this.handleClick}>\n        <BookItem book={this.props.book} />\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ListGroup } from 'react-bootstrap';\nimport CandidateBook from './CandidateBook';\nimport './BookSelector.css';\n\nexport default class BookSelector extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    if (this.props.candidateBooks.length <= 0) {\n      return null\n    }\n    const books = this.props.candidateBooks.items.map((book, i) => {\n      return (\n        <ListGroup.Item className=\"candidate-books-item\">\n          <CandidateBook book={book}\n                         onClick={this.props.onSelect} />\n        </ListGroup.Item>\n      )\n    })\n    return (\n      <ListGroup>\n        {books}\n      </ListGroup>\n    )\n  }\n}\n","import React from 'react';\nimport BookItem from './BookItem';\nimport './SelectedBook.css';\n\nexport default class SelectedBook extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    return (\n      <div className=\"selected-book\">\n        <BookItem book={this.props.book} />\n      </div>\n    )\n  }\n}\n","const HASH_TAG = 'よむよむ会'\nconst SERVICE_URL = 'https://yomuyomukai.tsujio.org'\n\nexport function getTweetText(book) {\n  return `\"${book.volumeInfo.title || ''}\",` +\n         ` ${(book.volumeInfo.authors || []).join(', ')},` +\n         ` ${book.volumeInfo.publisher || ''},` +\n         ` ${book.volumeInfo.publishedDate || ''}` +\n         ` ${book.volumeInfo.canonicalVolumeLink || ''}` +\n         `\\n#${HASH_TAG} ${SERVICE_URL}`\n}","import React from 'react';\nimport { Row, Col, Button } from 'react-bootstrap';\nimport { getTweetText } from '../lib/tweet';\nimport './TweetButton.css';\n\nexport default class TweetButton extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    const text = getTweetText(this.props.book)\n    const url = `http://twitter.com/share?url=${encodeURIComponent(text)}`\n\n    return (\n      <Row>\n        <Col>\n          <Button className=\"tweet-button\"\n                  variant=\"primary\"\n                  href={url}\n                  block\n                  target=\"_blank\">この本をツイートする</Button>\n        </Col>\n      </Row>\n    )\n  }\n}\n","import React from 'react';\nimport { Row, Col, Button } from 'react-bootstrap';\nimport { CardText } from 'react-bootstrap-icons';\nimport { getTweetText } from '../lib/tweet';\nimport './TweetTextCopyButton.css';\n\nexport default class TweetTextCopyButton extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleClick = this.handleClick.bind(this)\n  }\n\n  handleClick(event) {\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(getTweetText(this.props.book))\n    }\n  }\n\n  render() {\n    if (!this.props.book) {\n      return null\n    }\n\n    return (\n      <Row>\n        <Col>\n          <Button className=\"tweet-text-copy-button\"\n                  variant=\"light\"\n                  onClick={this.handleClick}><CardText /></Button>\n        </Col>\n      </Row>\n    )\n  }\n}\n","import React from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport BookSearchForm from './components/BookSearchForm';\nimport BookSelector from './components/BookSelector';\nimport SelectedBook from './components/SelectedBook';\nimport TweetButton from './components/TweetButton';\nimport TweetTextCopyButton from './components/TweetTextCopyButton';\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      candidateBooks: [],\n      selectedBook: null,\n    }\n    this.handleCandidateBooksUpdate = this.handleCandidateBooksUpdate.bind(this)\n    this.handleBookSelect = this.handleBookSelect.bind(this)\n  }\n\n  handleCandidateBooksUpdate(candidateBooks) {\n    if (!candidateBooks) {\n      this.setState({\n        candidateBooks: [],\n        selectedBook: null,\n      })\n    } else {\n      this.setState({\n        candidateBooks: candidateBooks,\n        selectedBook: null,\n      })\n    }\n  }\n\n  handleBookSelect(book) {\n    this.setState({\n      candidateBooks: [],\n      selectedBook: book,\n    })\n  }\n\n  render() {\n    return (\n      <Container>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <div className=\"header\">\n              <h1>本をよむよむ会</h1>\n            </div>\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <BookSearchForm onCandidateBooksUpdate={this.handleCandidateBooksUpdate} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <BookSelector candidateBooks={this.state.candidateBooks}\n                          onSelect={this.handleBookSelect} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <SelectedBook book={this.state.selectedBook} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={10} md={8} lg={6}>\n            <TweetButton book={this.state.selectedBook} />\n          </Col>\n          <Col xs={2} md={1} lg={1}>\n            <TweetTextCopyButton book={this.state.selectedBook} />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={12} md={10} lg={8}>\n            <div className=\"footer\">\n              <span>&copy; <a href=\"https://www.tsujio.org\">辻尾研</a></span>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    )\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}